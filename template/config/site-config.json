{
	"verbose": true,

	"options": [ { "-dce": "full" }, "-debug" ],

	"defines": [ "analyzer-optimize" ],

	"appserver": {
		"build": true,
		"strip": true
	},

	"browser": {
		"build": true,
		"compress": true,
		"websocket": true,
		"mithril": true
	},

	"webserver": {
		"build": true,
		"htdocs": "htdocs"
	},

	"renderview": {
		"build": true
	},

	"css": [
		{
			"src": [ "src/view/css/stylesheet.scss" ],
			"href": [ "stylesheet.css", "stylesheet.min.css" ],
			"dest": "htdocs",
			"method": "combine",
			"minifier": "sass-compressed"
		}
	],

	"javascript": [
		{
			"src": [ "node_modules/mithril/mithril.js", "node_modules/mithril/mithril.min.js" ],
			"href": [ "mithril.js", "mithril.min.js" ],
			"dest": "htdocs",
			"method": "combine"
		},
		{
			"src": [ "obj/browser.js" ],
			"href": [ "browser.js", "browser.min.js" ],
			"dest": "htdocs",
			"method": "combine",
			"minifier": "uglifyjs"
		}
	],

	"minifiers": {
		"uglifyjs": {
			"proc": "uglifyjs",
			"args": [ "--compress", "--mangle", "--" ]
		},
		"closure-compiler": {
			"proc": "closure-compiler",
			"args": [ "-O", "-SIMPLE" ]
		},
		"sass-compressed": {
			"proc": "sass",
			"args": [ "--style", "compressed" ]
		},
		"sass-compact": {
			"proc": "sass",
			"args": [ "--style", "compact" ]
		}
	},

	"scripts": {
		"build": "haxe build.hxml",

		"appsrv": "node_modules/nodemon/bin/nodemon.js -w appserver -e \".\"  -x ./appserver -c config/appserver-config.json -d config/pages-config.json",

		"websrv": "node_modules/nodemon/bin/nodemon.js -w webserver.js -e \".\" -x ./webserver.js -c config/webserver-config.json -d config/pages-config.json",

		"run": "concurrently \"site appsrv\" \"site websrv\"",

		"autobuild": "node_modules/nodemon/bin/nodemon.js -x \"haxe build.hxml\" -e \"hx hxml json scss\" -i \"obj\" -i \"node_modules\"",

		"clean": "rm -rf htdocs obj node_modules .sass-cache appserver webserver.js renderview.js",

		"html": "./renderview.js -c config/webserver-config.json -d config/pages-config.json -o htdocs"
	}
}
